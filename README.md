# –°–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ—Ä–µ–≤–Ω–æ–≤–∞–Ω–∏—è–º–∏ –ø–æ —Å–ø–æ—Ä—Ç–∏–≤–Ω–æ–º—É –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—é
## Competitive Programming Contest Management System

> **–ö—É—Ä—Å–æ–≤–∞—è —Ä–∞–±–æ—Ç–∞ –ø–æ –¥–∏—Å—Ü–∏–ø–ª–∏–Ω–µ "–ë–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö"**  
> –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –¥–ª—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ –∏ –ø—Ä–æ–≤–µ–¥–µ–Ω–∏—è –æ–ª–∏–º–ø–∏–∞–¥ –ø–æ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—é

---

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

- [–û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞](#–æ–ø–∏—Å–∞–Ω–∏–µ-–ø—Ä–æ–µ–∫—Ç–∞)
- [–¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫](#—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π-—Å—Ç–µ–∫)
- [–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö](#—Å—Ç—Ä—É–∫—Ç—É—Ä–∞-–±–∞–∑—ã-–¥–∞–Ω–Ω—ã—Ö)
- [–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç](#–±—ã—Å—Ç—Ä—ã–π-—Å—Ç–∞—Ä—Ç)
- [API –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](#api-–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è)
- [SQL –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å](#sql-—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å)
- [–ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è](#–ø—Ä–∏–º–µ—Ä—ã-–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è)

---

## üìñ –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä—É–µ—Ç –ø—Ä–æ—Ü–µ—Å—Å –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ —Å–æ—Ä–µ–≤–Ω–æ–≤–∞–Ω–∏–π –ø–æ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—é:

- ‚úÖ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ (—É—á–∞—Å—Ç–Ω–∏–∫–∏, –∂—é—Ä–∏, –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã)
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –∏ –ø—Ä–æ–≤–µ–¥–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ—Å—Ç–æ–≤
- ‚úÖ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á–∞–º–∏ —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è–º–∏ –ø–æ –≤—Ä–µ–º–µ–Ω–∏ –∏ –ø–∞–º—è—Ç–∏
- ‚úÖ –ü—Ä–∏–µ–º –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—Ü–µ–Ω–∫–∞ —Ä–µ—à–µ–Ω–∏–π
- ‚úÖ –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç—É—Ä–Ω–∏—Ä–Ω—ã—Ö —Ç–∞–±–ª–∏—Ü –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- ‚úÖ –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º, –∑–∞–¥–∞—á–∞–º, –∫–æ–Ω—Ç–µ—Å—Ç–∞–º

---

## üõ† –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

- **Backend**: Python 3.11, FastAPI
- **Database**: PostgreSQL 15
- **ORM**: SQLAlchemy 2.0
- **Containerization**: Docker, docker-compose
- **API Documentation**: Swagger/OpenAPI (–≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –≤ FastAPI)

---

## üóÑ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

### –¢–∞–±–ª–∏—Ü—ã (10)

1. **users** ‚Äî –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å–∏—Å—Ç–µ–º—ã
2. **contests** ‚Äî —Å–æ—Ä–µ–≤–Ω–æ–≤–∞–Ω–∏—è
3. **problems** ‚Äî –∑–∞–¥–∞—á–∏
4. **contest_problems** ‚Äî —Å–≤—è–∑—å –∑–∞–¥–∞—á —Å –∫–æ–Ω—Ç–µ—Å—Ç–∞–º–∏ (N:M)
5. **testcases** ‚Äî —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –∑–∞–¥–∞—á
6. **submissions** ‚Äî –ø–æ—Å—ã–ª–∫–∏ —Ä–µ—à–µ–Ω–∏–π
7. **standings** ‚Äî —Ç—É—Ä–Ω–∏—Ä–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞
8. **tags** ‚Äî —Ç–µ–≥–∏ –¥–ª—è –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∑–∞–¥–∞—á
9. **problem_tags** ‚Äî —Å–≤—è–∑—å –∑–∞–¥–∞—á —Å —Ç–µ–≥–∞–º–∏ (N:M)
10. **audit_log** ‚Äî –∂—É—Ä–Ω–∞–ª –∞—É–¥–∏—Ç–∞ –≤—Å–µ—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π

### –°–≤—è–∑–∏

- **1:N** ‚Äî users ‚Üí contests, users ‚Üí problems, problems ‚Üí testcases
- **N:M** ‚Äî contests ‚Üî problems, problems ‚Üî tags
- **1:1** ‚Äî –∫–∞–∂–¥–∞—è –∑–∞–ø–∏—Å—å standings —É–Ω–∏–∫–∞–ª—å–Ω–∞ –¥–ª—è –ø–∞—Ä—ã (contest, user)

### –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏

- `PRIMARY KEY` –Ω–∞ –≤—Å–µ —Ç–∞–±–ª–∏—Ü—ã
- `FOREIGN KEY` —Å `ON DELETE CASCADE` –¥–ª—è –∫–∞—Å–∫–∞–¥–Ω–æ–≥–æ —É–¥–∞–ª–µ–Ω–∏—è
- `UNIQUE` –¥–ª—è —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π (username, email, tag_name)
- `CHECK` –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –∑–Ω–∞—á–µ–Ω–∏–π (role, status, verdict, difficulty)
- `NOT NULL` –¥–ª—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Docker Desktop (Windows) –∏–ª–∏ Docker Engine (Linux/Mac)
- docker-compose
- 4 GB RAM minimum

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

```bash
# 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å –∏–ª–∏ —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–µ–∫—Ç
cd C:\Education\DB_Labs\CP

# 2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å/—Å–æ–∑–¥–∞—Ç—å .env —Ñ–∞–π–ª (—É–∂–µ —Å–æ–∑–¥–∞–Ω)
# –§–∞–π–ª —Å–æ–¥–µ—Ä–∂–∏—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î

# 3. –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã —á–µ—Ä–µ–∑ Docker Compose
docker-compose up -d

# 4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å
docker-compose ps

# –î–æ–ª–∂–Ω—ã –∑–∞–ø—É—Å—Ç–∏—Ç—å—Å—è 2 –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞:
# - cp_postgres (–ë–î)
# - cp_backend (API)
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

1. **Swagger UI** (–∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API):
   ```
   http://localhost:8000/docs
   ```

2. **ReDoc** (–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è):
   ```
   http://localhost:8000/redoc
   ```

3. **Health Check**:
   ```
   http://localhost:8000/health
   ```

### –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –æ—á–∏—Å—Ç–∫–∞

```bash
# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
docker-compose down

# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏ —É–¥–∞–ª–∏—Ç—å –≤—Å–µ –¥–∞–Ω–Ω—ã–µ
docker-compose down -v
```

---

## üìö API –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

### –û—Å–Ω–æ–≤–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã

#### Users (–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏)
- `POST /users/` ‚Äî —Å–æ–∑–¥–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `GET /users/` ‚Äî –ø–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- `GET /users/{user_id}` ‚Äî –ø–æ–ª—É—á–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ ID
- `PUT /users/{user_id}` ‚Äî –æ–±–Ω–æ–≤–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `DELETE /users/{user_id}` ‚Äî —É–¥–∞–ª–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

#### Contests (–°–æ—Ä–µ–≤–Ω–æ–≤–∞–Ω–∏—è)
- `POST /contests/` ‚Äî —Å–æ–∑–¥–∞—Ç—å –∫–æ–Ω—Ç–µ—Å—Ç
- `GET /contests/` ‚Äî –ø–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –∫–æ–Ω—Ç–µ—Å—Ç–æ–≤
- `GET /contests/{contest_id}` ‚Äî –ø–æ–ª—É—á–∏—Ç—å –∫–æ–Ω—Ç–µ—Å—Ç –ø–æ ID
- `PUT /contests/{contest_id}` ‚Äî –æ–±–Ω–æ–≤–∏—Ç—å –∫–æ–Ω—Ç–µ—Å—Ç
- `DELETE /contests/{contest_id}` ‚Äî —É–¥–∞–ª–∏—Ç—å –∫–æ–Ω—Ç–µ—Å—Ç

#### Problems (–ó–∞–¥–∞—á–∏)
- `POST /problems/` ‚Äî —Å–æ–∑–¥–∞—Ç—å –∑–∞–¥–∞—á—É
- `GET /problems/` ‚Äî –ø–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á
- `GET /problems/{problem_id}` ‚Äî –ø–æ–ª—É—á–∏—Ç—å –∑–∞–¥–∞—á—É –ø–æ ID
- `PUT /problems/{problem_id}` ‚Äî –æ–±–Ω–æ–≤–∏—Ç—å –∑–∞–¥–∞—á—É
- `DELETE /problems/{problem_id}` ‚Äî —É–¥–∞–ª–∏—Ç—å –∑–∞–¥–∞—á—É

#### Submissions (–ü–æ—Å—ã–ª–∫–∏)
- `POST /submissions/` ‚Äî –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Ä–µ—à–µ–Ω–∏–µ
- `GET /submissions/` ‚Äî –ø–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –ø–æ—Å—ã–ª–æ–∫
- `GET /submissions/{submission_id}` ‚Äî –ø–æ–ª—É—á–∏—Ç—å –ø–æ—Å—ã–ª–∫—É –ø–æ ID
- `PUT /submissions/{submission_id}` ‚Äî –æ–±–Ω–æ–≤–∏—Ç—å –≤–µ—Ä–¥–∏–∫—Ç
- `DELETE /submissions/{submission_id}` ‚Äî —É–¥–∞–ª–∏—Ç—å –ø–æ—Å—ã–ª–∫—É

#### Analytics (–ê–Ω–∞–ª–∏—Ç–∏–∫–∞) ‚Äî –∏—Å–ø–æ–ª—å–∑—É–µ—Ç VIEW –∏ SQL —Ñ—É–Ω–∫—Ü–∏–∏
- `GET /analytics/standings/{contest_id}` ‚Äî —Ç—É—Ä–Ω–∏—Ä–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ (VIEW)
- `GET /analytics/users/statistics/all` ‚Äî —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (VIEW)
- `GET /analytics/problems/statistics/all` ‚Äî —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∑–∞–¥–∞—á (VIEW)
- `GET /analytics/languages/statistics` ‚Äî —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —è–∑—ã–∫–æ–≤ (VIEW)
- `GET /analytics/verdicts/distribution` ‚Äî —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –≤–µ—Ä–¥–∏–∫—Ç–æ–≤ (VIEW)
- `GET /analytics/users/{user_id}/success-rate` ‚Äî –ø—Ä–æ—Ü–µ–Ω—Ç —Ä–µ—à–µ–Ω–Ω—ã—Ö –∑–∞–¥–∞—á (—Ñ—É–Ω–∫—Ü–∏—è)
- `GET /analytics/users/top?limit=10` ‚Äî —Ç–æ–ø –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (—Ñ—É–Ω–∫—Ü–∏—è)
- `GET /analytics/contests/{contest_id}/statistics` ‚Äî —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∫–æ–Ω—Ç–µ—Å—Ç–∞ (—Ñ—É–Ω–∫—Ü–∏—è)
- `GET /analytics/users/{user_id}/contest/{contest_id}/report` ‚Äî –æ—Ç—á–µ—Ç –ø–æ –∫–æ–Ω—Ç–µ—Å—Ç—É (—Ñ—É–Ω–∫—Ü–∏—è)
- `GET /analytics/audit-log` ‚Äî –∂—É—Ä–Ω–∞–ª –∞—É–¥–∏—Ç–∞

#### Batch Operations (–ú–∞—Å—Å–æ–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞)
- `POST /batch/import` ‚Äî –º–∞—Å—Å–æ–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö —Å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º –æ—à–∏–±–æ–∫

---

## üîß SQL –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

### –¢—Ä–∏–≥–≥–µ—Ä—ã

1. **Audit Triggers** ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π
   - `users_audit_trigger` ‚Äî –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
   - `contests_audit_trigger` ‚Äî –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π –∫–æ–Ω—Ç–µ—Å—Ç–æ–≤
   - `submissions_audit_trigger` ‚Äî –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ—Å—ã–ª–æ–∫

2. **Business Logic Triggers** ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
   - `update_standings_trigger` ‚Äî –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç—É—Ä–Ω–∏—Ä–Ω–æ–π —Ç–∞–±–ª–∏—Ü—ã –ø—Ä–∏ –Ω–æ–≤–æ–π accepted –ø–æ—Å—ã–ª–∫–µ
   - `update_user_rating_trigger` ‚Äî –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ä–µ–π—Ç–∏–Ω–≥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∫–æ–Ω—Ç–µ—Å—Ç–∞

### SQL –§—É–Ω–∫—Ü–∏–∏

#### –°–∫–∞–ª—è—Ä–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
- `get_user_success_rate(user_id)` ‚Äî –ø—Ä–æ—Ü–µ–Ω—Ç —Ä–µ—à–µ–Ω–Ω—ã—Ö –∑–∞–¥–∞—á
- `calculate_problem_difficulty(problem_id)` ‚Äî —Ä–∞—Å—á–µ—Ç —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ –ø–æ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–µ
- `get_user_contest_rank(user_id, contest_id)` ‚Äî –º–µ—Å—Ç–æ –≤ –∫–æ–Ω—Ç–µ—Å—Ç–µ
- `count_unique_solved_problems(user_id)` ‚Äî –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö —Ä–µ—à–µ–Ω–Ω—ã—Ö –∑–∞–¥–∞—á

#### –¢–∞–±–ª–∏—á–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
- `get_top_users(limit)` ‚Äî —Ç–æ–ø –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ø–æ —Ä–µ–π—Ç–∏–Ω–≥—É
- `get_contest_statistics(contest_id)` ‚Äî –ø–æ–ª–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∫–æ–Ω—Ç–µ—Å—Ç–∞
- `get_user_contest_report(user_id, contest_id)` ‚Äî –¥–µ—Ç–∞–ª—å–Ω—ã–π –æ—Ç—á–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `get_problem_statistics()` ‚Äî —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –≤—Å–µ–º –∑–∞–¥–∞—á–∞–º

### –ü—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è (Views)

1. **v_contest_standings** ‚Äî —Ç—É—Ä–Ω–∏—Ä–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è—Ö
2. **v_user_statistics** ‚Äî –∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
3. **v_problem_statistics** ‚Äî —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∑–∞–¥–∞—á —Å —Ç–µ–≥–∞–º–∏
4. **v_language_statistics** ‚Äî —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —è–∑—ã–∫–æ–≤
5. **v_verdict_distribution** ‚Äî —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –≤–µ—Ä–¥–∏–∫—Ç–æ–≤

### –ò–Ω–¥–µ–∫—Å—ã –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

```sql
-- –ü—Ä–∏–º–µ—Ä—ã —Å–æ–∑–¥–∞–Ω–Ω—ã—Ö –∏–Ω–¥–µ–∫—Å–æ–≤:
CREATE INDEX idx_users_rating ON users(rating DESC);
CREATE INDEX idx_submissions_contest_user ON submissions(contest_id, user_id);
CREATE INDEX idx_submissions_problem_verdict ON submissions(problem_id, verdict);
CREATE INDEX idx_standings_rank ON standings(contest_id, rank);
-- –ò –±–æ–ª–µ–µ 25 –¥—Ä—É–≥–∏—Ö –∏–Ω–¥–µ–∫—Å–æ–≤...
```

---

## üí° –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### 1. –°–æ–∑–¥–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

```bash
curl -X POST "http://localhost:8000/users/" \
  -H "Content-Type: application/json" \
  -d '{
    "username": "newuser",
    "email": "newuser@example.com",
    "full_name": "New User",
    "role": "participant",
    "country": "Russia",
    "rating": 1500
  }'
```

### 2. –ü–æ–ª—É—á–∏—Ç—å —Ç—É—Ä–Ω–∏—Ä–Ω—É—é —Ç–∞–±–ª–∏—Ü—É

```bash
curl "http://localhost:8000/analytics/standings/1"
```

### 3. –ú–∞—Å—Å–æ–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

```bash
curl -X POST "http://localhost:8000/batch/import" \
  -H "Content-Type: application/json" \
  -d '{
    "entity_type": "users",
    "data": [
      {
        "username": "user1",
        "email": "user1@test.com",
        "full_name": "Test User 1",
        "role": "participant"
      },
      {
        "username": "user2",
        "email": "user2@test.com",
        "full_name": "Test User 2",
        "role": "participant"
      }
    ]
  }'
```

### 4. –ü–æ–ª—É—á–∏—Ç—å —Ç–æ–ø-10 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

```bash
curl "http://localhost:8000/analytics/users/top?limit=10"
```

### 5. –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∂—É—Ä–Ω–∞–ª –∞—É–¥–∏—Ç–∞

```bash
curl "http://localhost:8000/analytics/audit-log?table_name=users&limit=50"
```

---

## üìä –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è —Ä–∞–±–æ—Ç—ã —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤

### –ü—Ä–∏–º–µ—Ä 1: –ê—É–¥–∏—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π

```sql
-- –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —á–µ—Ä–µ–∑ API –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ—Ç—Å—è –∑–∞–ø–∏—Å—å –≤ audit_log
INSERT INTO users (username, email, full_name, role)
VALUES ('demo', 'demo@test.com', 'Demo User', 'participant');

-- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å audit_log:
SELECT * FROM audit_log WHERE table_name = 'users' ORDER BY changed_at DESC LIMIT 1;
```

### –ü—Ä–∏–º–µ—Ä 2: –ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ standings

```sql
-- –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ submission —Å verdict='accepted' –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
-- 1. –û–±–Ω–æ–≤–ª—è–µ—Ç—Å—è standings (total_score, problems_solved, penalty_time)
-- 2. –ü–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞—é—Ç—Å—è —Ä–∞–Ω–≥–∏ –≤—Å–µ—Ö —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –∫–æ–Ω—Ç–µ—Å—Ç–∞

-- –ü—Ä–æ—Å–º–æ—Ç—Ä standings:
SELECT * FROM v_contest_standings WHERE contest_id = 1 ORDER BY rank;
```

---

## üéØ –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### EXPLAIN ANALYZE ‚Äî –¥–æ –∏ –ø–æ—Å–ª–µ –∏–Ω–¥–µ–∫—Å–æ–≤

```sql
-- –ë–µ–∑ –∏–Ω–¥–µ–∫—Å–∞:
EXPLAIN ANALYZE
SELECT * FROM submissions WHERE user_id = 3;
-- Planning Time: 0.250 ms
-- Execution Time: 15.432 ms

-- –° –∏–Ω–¥–µ–∫—Å–æ–º (idx_submissions_user):
EXPLAIN ANALYZE
SELECT * FROM submissions WHERE user_id = 3;
-- Planning Time: 0.180 ms
-- Execution Time: 0.845 ms
-- –£–ª—É—á—à–µ–Ω–∏–µ: ~18x –±—ã—Å—Ç—Ä–µ–µ
```

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
CP/
‚îú‚îÄ‚îÄ backend/
‚îÇ   ‚îú‚îÄ‚îÄ app/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ routes/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ users.py
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ contests.py
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ problems.py
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ submissions.py
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ analytics.py
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ batch.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ main.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ database.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ models.py
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ schemas.py
‚îÇ   ‚îú‚îÄ‚îÄ Dockerfile
‚îÇ   ‚îî‚îÄ‚îÄ requirements.txt
‚îú‚îÄ‚îÄ sql/
‚îÇ   ‚îú‚îÄ‚îÄ 01_schema.sql        # –°—Ö–µ–º–∞ –ë–î
‚îÇ   ‚îú‚îÄ‚îÄ 02_triggers.sql      # –¢—Ä–∏–≥–≥–µ—Ä—ã
‚îÇ   ‚îú‚îÄ‚îÄ 03_functions.sql     # SQL —Ñ—É–Ω–∫—Ü–∏–∏
‚îÇ   ‚îú‚îÄ‚îÄ 04_views.sql         # –ü—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ 05_indexes.sql       # –ò–Ω–¥–µ–∫—Å—ã
‚îÇ   ‚îî‚îÄ‚îÄ 06_test_data.sql     # –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
‚îú‚îÄ‚îÄ docker-compose.yml
‚îú‚îÄ‚îÄ .env
‚îú‚îÄ‚îÄ .env.example
‚îú‚îÄ‚îÄ .gitignore
‚îî‚îÄ‚îÄ README.md
```

---

## ‚úÖ –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º –¢–ó

| –¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ | –°—Ç–∞—Ç—É—Å | –û–ø–∏—Å–∞–Ω–∏–µ |
|------------|--------|----------|
| 9-10 —Ç–∞–±–ª–∏—Ü | ‚úÖ | 10 —Ç–∞–±–ª–∏—Ü —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ |
| –°–≤—è–∑–∏ 1:1, 1:N, N:M | ‚úÖ | –í—Å–µ —Ç–∏–ø—ã —Å–≤—è–∑–µ–π –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç |
| PRIMARY KEY, FOREIGN KEY, CHECK, NOT NULL | ‚úÖ | –í—Å–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã |
| –¢—Ä–∏–≥–≥–µ—Ä—ã –¥–ª—è –∞—É–¥–∏—Ç–∞ | ‚úÖ | 3 —Ç—Ä–∏–≥–≥–µ—Ä–∞ –¥–ª—è audit_log |
| –¢—Ä–∏–≥–≥–µ—Ä—ã –¥–ª—è –∞–≥—Ä–µ–≥–∞—Ç–æ–≤ | ‚úÖ | –ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ standings –∏ —Ä–µ–π—Ç–∏–Ω–≥–æ–≤ |
| –°–∫–∞–ª—è—Ä–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ | ‚úÖ | 4 —Å–∫–∞–ª—è—Ä–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ |
| –¢–∞–±–ª–∏—á–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ | ‚úÖ | 4 —Ç–∞–±–ª–∏—á–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ |
| –ü—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è (VIEW) | ‚úÖ | 5 –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–π |
| –ò–Ω–¥–µ–∫—Å—ã | ‚úÖ | 25+ –∏–Ω–¥–µ–∫—Å–æ–≤ |
| CRUD —á–µ—Ä–µ–∑ API | ‚úÖ | –í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ FastAPI |
| –°–ª–æ–∂–Ω—ã–µ SQL –∑–∞–ø—Ä–æ—Å—ã | ‚úÖ | JOIN, –∞–≥—Ä–µ–≥–∞—Ç—ã, –ø–æ–¥–∑–∞–ø—Ä–æ—Å—ã |
| Batch-import | ‚úÖ | –° –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º –æ—à–∏–±–æ–∫ |
| Swagger –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è | ‚úÖ | –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è |
| Docker | ‚úÖ | docker-compose –¥–ª—è –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ |
| –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å | ‚úÖ | –ü–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã, .env |

---

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- ‚úÖ –í—Å–µ –ø–∞—Ä–æ–ª–∏ –∏ credentials —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ `.env` —Ñ–∞–π–ª–µ (–Ω–µ –≤ –∫–æ–¥–µ)
- ‚úÖ –í—Å–µ SQL –∑–∞–ø—Ä–æ—Å—ã –ø–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–æ–≤–∞–Ω—ã (–∑–∞—â–∏—Ç–∞ –æ—Ç SQL-–∏–Ω—ä–µ–∫—Ü–∏–π)
- ‚úÖ `.env` –¥–æ–±–∞–≤–ª–µ–Ω –≤ `.gitignore`
- ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ SQLAlchemy ORM –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

---

## üéì –ê–≤—Ç–æ—Ä

**–ö—É—Ä—Å–æ–≤–∞—è —Ä–∞–±–æ—Ç–∞ –ø–æ –¥–∏—Å—Ü–∏–ø–ª–∏–Ω–µ "–ë–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö"**  
–¢–µ–º–∞: –°–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ—Ä–µ–≤–Ω–æ–≤–∞–Ω–∏—è–º–∏ –ø–æ —Å–ø–æ—Ä—Ç–∏–≤–Ω–æ–º—É –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—é  
2025 –≥–æ–¥

---

## üìù –õ–∏—Ü–µ–Ω–∑–∏—è

–£—á–µ–±–Ω—ã–π –ø—Ä–æ–µ–∫—Ç –¥–ª—è –∫—É—Ä—Å–æ–≤–æ–π —Ä–∞–±–æ—Ç—ã
